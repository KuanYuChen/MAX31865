[Micropython]TPYBoard DIY金属检测仪
======================================

原创版权归山东萝卜科技有限公司所有,转载必须以链接形式注明作者和原始出处。

1.实验目的
----------------

    1. 学习在PC机系统中扩展简单I/O 接口的方法。
    2. 进一步学习编制数据输入输出程序的设计方法。
    3. 学习LJ12A3-4-Z/BX 金属接近开关的工作原理。
    4. 硬件接线方法。
    5. 学会用TPYBoard接收金属接近开关的输出信号，并对信号进行判断处理，点亮LED发光二极管。

2.所需元器件
-----------------

    TPYBoard板子一块
    LJ12A3-4-Z/BX 金属接近开关一个
    面包板一块
    发光二极管一个
    数据线一条
    杜邦线若干

3.LJ12A3-4-Z/BX 接近开关工作原理
-------------------------------------  


.. image::http://www.tpyboard.com/ueditor/php/upload/image/20161220/1482216851281836.png

    接近开关既有行程开关、微动开关的特性，同时具有传感性能，且动作可靠，性能稳定，频率响应快，应用寿命长，抗干扰能力强等，并且有防水防震，耐腐蚀等特点。

    接近开关的输出信号是输出数字信号，即当没有金属靠近时，输出1，当有金属时，输出0，通过前面的探头检测是否有金属，然后将检测的数字传递到TPYBoard，然后TPYBoard作出相应的判断，广泛应用于机床、冶金、化工、航天航空、轻纺与印刷等行业；在日常生活中，可用于宾馆、饭店、车库的自动门，自动热风机上都有应用；在安全防盗方面，如资料档案、财会、金融、博物馆、金库等重地，通常都装有各种接近开关组成的防盗装置。

    我们只需要正极（灰线）连接TPYBoard的VIN引脚，负极（蓝线）接TPYBoard的GND引脚，黑线（输出信号）连接TPYBoard的IO针脚，在这用到的Y1针脚，连接完毕后，当有金属靠近时，接近开关本身自带的红色灯就会亮起来，当远离金属时候，灯熄灭。

.. image::http://www.tpyboard.com/ueditor/php/upload/image/20161220/1482216879826644.png
    
LJ12A3-4-Z/BX接近开关


4.硬件接线方法
--------------------

    上面我们将接近开关线接好后，TPYboard开发板即可通过Y1针脚收集金属开关传递过来的数字信号，我们即可通过这个信号，来让开发板控制自动门开，报警等，在这只是做了一个简单易懂的应用，点亮我们的红色LED发光二极管。

.. image::http://www.tpyboard.com/ueditor/php/upload/image/20161220/1482216919240450.png      

.. image:: http://www.tpyboard.com/ueditor/php/upload/image/20161220/1482216954934573.png

周围没金属                                                                接近金属时

5.源代码
-------------   

.. code-block:: python
    
	# main.py -- put your code here!
	import pyb
	from machine import Pin
	  
	y1 = Pin('Y1', Pin.IN)
	x1 = Pin('X1', Pin.OUT_PP)
	  
	while 1:
		#无金属时
		if y1.value() == 1 :
			print(y1.value())
			x1.value(0)
		#有金属时
		else:
			print(y1.value())
			x1.value(1)
    
